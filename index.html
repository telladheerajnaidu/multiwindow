<!DOCTYPE html>
<html>
<head>
  <title>Chained Popups for Automation Testing</title>
  <script>
    function openPopup(step) {
      const nextStep = step + 1;
      const isFinal = step >= 6;

      const popup = window.open('', `popup${step}`, 'width=400,height=300');

      if (popup) {
        popup.document.write(`
          <html>
            <head><title>Popup ${step}</title></head>
            <body>
              <h2>This is Popup Window ${step}</h2>
              <div id="button-container">
                <p>Loading next button...</p>
              </div>

              <script>
                function openPopup(step) {
                  const nextStep = step + 1;
                  const isFinal = step >= 6;
                  const popup = window.open('', 'popup' + step, 'width=400,height=300');
                  if (popup) {
                    popup.document.write(\`
                      <html>
                        <head><title>Popup \${step}</title></head>
                        <body>
                          <h2>This is Popup Window \${step}</h2>
                          <div id="button-container">
                            <p>Loading next button...</p>
                          </div>
                          <script>
                            function openPopup(step) {
                              const nextStep = step + 1;
                              const isFinal = step >= 6;
                              const popup = window.open('', 'popup' + step, 'width=400,height=300');
                              // Recursion logic repeats
                            }
                            setTimeout(() => {
                              const container = document.getElementById('button-container');
                              if (!isFinal) {
                                container.innerHTML = '<button id="popupButton">Open Popup</button>';
                                document.getElementById('popupButton').onclick = () => openPopup(\${nextStep});
                              } else {
                                container.innerHTML = '<p>This is the final popup.</p>';
                              }
                            }, 2000);
                          <\/script>
                        </body>
                      </html>
                    \`);
                    popup.document.close();
                  }
                }

                setTimeout(() => {
                  const container = document.getElementById('button-container');
                  if (!isFinal) {
                    container.innerHTML = '<button id="popupButton">Open Popup</button>';
                    document.getElementById('popupButton').onclick = () => openPopup(${nextStep});
                  } else {
                    container.innerHTML = '<p>This is the final popup.</p>';
                  }
                }, 2000);
              <\/script>
            </body>
          </html>
        `);
        popup.document.close();
      }
    }
  </script>
</head>
<body>
  <h1>Chained Popups for Automation Testing</h1>
  <button onclick="openPopup(1)">Start Popup Chain</button>
</body>
</html>
